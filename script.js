document.getElementById('uploadForm').addEventListener('submit', async function(e) { e.preventDefault(); const input = document.getElementById('fileInput'); const nsfw = document.getElementById('nsfwCheck').checked; const results = document.getElementById('results'); results.innerHTML = ''; if (!input.files.length) { alert('Veuillez choisir une image.'); return; } const formData = new FormData(); formData.append('image', input.files[0]); formData.append('nsfw', nsfw); try { const res = await fetch('/upload', { method: 'POST', body: formData }); const data = await res.json(); data.links.forEach(link => { const a = document.createElement('a'); a.href = link.url; a.textContent = link.name; a.target = '_blank'; results.appendChild(a); }); } catch (err) { alert("Erreur lors de l'upload ou génération des liens."); } });